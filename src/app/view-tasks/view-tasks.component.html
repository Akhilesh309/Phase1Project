
<app-home></app-home>
<br/>

<div class="container mt-4">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <div class="row">
            <div class="col-md-6">
              <h4 class="card-title">All Project Tasks Info</h4>
            </div>

          </div>
        </div>
        <div class="card-body">
          <div class="form-group">
            <label for="projectDropdown">Select Project:</label>
            <select class="form-control" id="projectDropdown" [(ngModel)]="selectedProjectId" (change)="onProjectSelect()">
              <option value="" disabled selected>Select a project</option>
              <option *ngFor="let project of allProjects" [value]="project.id">{{ project.ProjectName }}</option>
            </select>
          </div>
          <hr>
          <div *ngIf="allTask.length > 0">
            <table class="table table-bordered table-striped">
              <thead>
                <tr>
                  <th>Task ID</th>
                  <th>Task Name</th>
                  <th>Task Description</th>
                  <th>Project Id</th>
                  <th>Operations</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let pt of allTask">
                  <td>{{ pt.id }}</td>
                  <td>{{ pt.TaskName }}</td>
                  <td>{{ pt.TaskDescription }}</td>
                  <td>{{ pt.ProjectId }}</td>
                  <td>
                    <button class="btn btn-success btn-sm" (click)="getModTaskPage(pt.id)">Modify</button>
                    &nbsp; &nbsp; &nbsp;
                    <button class="btn btn-danger btn-sm" (click)="delTask(pt.id)">Delete</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div *ngIf="allTask.length === 0" class="text-center mt-3">
            No tasks available for the selected project.
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<br/>
<div class="col-md-12 text-center">
  <a routerLink="/addtask" class="btn btn-primary btn-lg">New Task</a>
</div>
